"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[469],{3444:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var s=n(3433),a=n(5987),i=n(9439),r=n(2791),c=n(9434),l=n(5618),o=n(9513),m=n.n(o),d=(n(8639),n(1241)),u=n(7059),h=n(2677),x="HomePage_listClientsBox__lO5Os",p="HomePage_date__ddhw5",v="HomePage_btn_addRecord__5Ji7x",j=(n(7632),n(7762)),b=n(4942),f=n(1413),y=n(2506),g=n(6727),N=n(6355),_=n(4217),T="ClientForm_form__ZNfSa",Z="ClientForm_btn_close__PrguA",F="ClientForm_title__zR9Xb",S="ClientForm_selectTime__VihyU",k="ClientForm_btn_free__QtqEN",C="ClientForm_btn_choose__lSDmb",w="ClientForm_btn_disabled__KTiFE",D="ClientForm_btn_save__JxAxF",E="ClientForm_btn_cancel__NQtXI",I=n(5218),M=n(4373),H=n(184),P=["_id","owner","name"],q=g.Ry().shape({name:g.Z_().required("\u041f\u043e\u043b\u0435 \"\u0406\u043c'\u044f\" \u043e\u0431\u043e\u0432'\u044f\u0437\u043a\u043e\u0432\u0435 \u0434\u043b\u044f \u0437\u0430\u043f\u043e\u0432\u043d\u0435\u043d\u043d\u044f"),phone:g.Z_(),serviceType:g.IX().of(g.Z_()).min(1,"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0445\u043e\u0447\u0430 \u0431 \u043e\u0434\u0438\u043d \u0432\u0438\u0434 \u043f\u043e\u0441\u043b\u0443\u0433\u0438").required("\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0432\u0438\u0434 \u043f\u043e\u0441\u043b\u0443\u0433\u0438"),notes:g.Z_()}),A=function(e){var t=e.date,n=e.handleAddRecordForm,o=e.dateClients,m=e.clientToEdit,d=(0,c.I0)(),u=(0,r.useState)(!1),x=(0,i.Z)(u,2),p=x[0],v=x[1],g=(0,r.useState)([]),A=(0,i.Z)(g,2),W=A[0],Y=A[1],R=(0,r.useState)({date:"",month:"",year:""}),Q=(0,i.Z)(R,2),z=Q[0],B=Q[1],L=(0,r.useState)(!1),U=(0,i.Z)(L,2),J=U[0],X=U[1],O=(0,r.useRef)(null),V=(0,c.v9)(_.dy);(0,r.useEffect)((function(){m&&(Y((0,s.Z)(m.visitTimes.map((function(e){return(0,f.Z)((0,f.Z)({},e),{},{isSelected:!0})})))),B({date:m.date,month:m.month,year:m.year}))}),[m]);var K=function(e){var t=e.target,n=t.name,s=t.value;B((function(e){return(0,f.Z)((0,f.Z)({},e),{},(0,b.Z)({},n,s))}))},G=function(e){Y((function(t){if(t.some((function(t){return t.visitTime===e.visitTime})))return t.filter((function(t){return t.visitTime!==e.visitTime}));var n=[].concat((0,s.Z)(t),[(0,f.Z)((0,f.Z)({},e),{},{isSelected:!0})]);return n.sort((function(e,t){return new Date("2000-01-01T".concat(e.visitTime))-new Date("2000-01-01T".concat(t.visitTime))})),n.map((function(e){return(0,f.Z)((0,f.Z)({},e),{},{isSelected:!0})}))}))},$={name:"",phone:"",serviceType:[],notes:""};return(0,H.jsx)(h.Z,{className:"ps-4 pe-4 pb-2 border-top",children:(0,H.jsx)(y.J9,{initialValues:m||$,validationSchema:q,onSubmit:function(e,s){var i=s.resetForm;if(0===W.length&&X(!0),m){e._id,e.owner;var r=e.name,c=(0,a.Z)(e,P),o={id:m._id,values:(0,f.Z)((0,f.Z)({},c),{},{name:r.toLowerCase(),visitTimes:W,date:Number(z.date),month:Number(z.month),year:Number(z.year)})};d((0,l.u8)(o)).then((function(e){"fulfilled"===e.meta.requestStatus?(I.ZP.success("\u0417\u0430\u043f\u0438\u0441 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e!",{duration:2e3,position:"top-center"}),d((0,l.Q7)()),i({values:$})):"rejected"===e.meta.requestStatus&&I.ZP.error("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430, \u0437\u0430\u043f\u0438\u0441 \u043d\u0435 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043e! \u041e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0442\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043d\u043e\u0432\u0443",{duration:3e3,position:"top-center"})})).catch((function(e){})),n(),m(null),i({values:$})}else{var u=(0,f.Z)((0,f.Z)({},e),{},{name:e.name.toLowerCase(),visitTimes:W,date:t.getDate(),month:t.getMonth()+1,year:t.getFullYear()});d((0,l.ZF)(u)).then((function(e){"fulfilled"===e.meta.requestStatus?(I.ZP.success("\u0417\u0430\u043f\u0438\u0441 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043e!",{duration:2e3,position:"top-center"}),d((0,l.Q7)()),i({values:$})):"rejected"===e.meta.requestStatus&&I.ZP.error("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430, \u0437\u0430\u043f\u0438\u0441 \u043d\u0435 \u0432\u0456\u0434\u0431\u0443\u0432\u0441\u044f! \u041e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0442\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043d\u043e\u0432\u0443",{duration:3e3,position:"top-center"})})).catch((function(e){})),n(),i({values:$}),O.current&&O.current.focus()}},children:(0,H.jsxs)(y.l0,{className:T,children:[(0,H.jsx)(M.QAE,{className:Z,onClick:n}),(0,H.jsx)("h5",{className:F,children:"\u0417\u0430\u043f\u0438\u0441 \u043a\u043b\u0456\u0454\u043d\u0442\u0430"}),(0,H.jsxs)("div",{children:[(0,H.jsx)(y.gN,{type:"text",id:"name",name:"name",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043c'\u044f \u043a\u043b\u0456\u043d\u0442\u0430"}),(0,H.jsx)(y.Bc,{name:"name",component:"div",className:"text-danger"})]}),(0,H.jsxs)("div",{className:"pt-2",children:[(0,H.jsx)(y.gN,{type:"text",id:"phone",name:"phone",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443",innerRef:O}),(0,H.jsx)(y.Bc,{name:"phone",component:"div",className:"text-danger"})]}),(0,H.jsxs)("div",{children:["Hair master"===V.beautyMaster&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("label",{htmlFor:"serviceType",className:"fw-bold mt-1",children:"\u0412\u0438\u0434 \u043f\u043e\u0441\u043b\u0443\u0433\u0438:"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"womanHaircut",name:"serviceType",value:"\u0416\u0456\u043d\u043e\u0447\u0430 \u0441\u0442\u0440\u0438\u0436\u043a\u0430",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"womanHaircut",children:"\u0416\u0456\u043d\u043e\u0447\u0430 \u0441\u0442\u0440\u0438\u0436\u043a\u0430"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"manHaircut",name:"serviceType",value:"\u0427\u043e\u043b\u043e\u0432\u0456\u0447\u0430 \u0441\u0442\u0440\u0438\u0436\u043a\u0430",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"manHaircut",children:"\u0427\u043e\u043b\u043e\u0432\u0456\u0447\u0430 \u0441\u0442\u0440\u0438\u0436\u043a\u0430"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"childHaircut",name:"serviceType",value:"\u0414\u0438\u0442\u044f\u0447\u0430 \u0441\u0442\u0440\u0438\u0436\u043a\u0430",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"manHaircut",children:"\u0414\u0438\u0442\u044f\u0447\u0430 \u0441\u0442\u0440\u0438\u0436\u043a\u0430"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"hairColoring",name:"serviceType",value:"\u0424\u0430\u0440\u0431\u0443\u0432\u0430\u043d\u043d\u044f \u0432\u043e\u043b\u043e\u0441\u0441\u044f",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"hairColoring",children:"\u0424\u0430\u0440\u0431\u0443\u0432\u0430\u043d\u043d\u044f \u0432\u043e\u043b\u043e\u0441\u0441\u044f"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"hairCare",name:"serviceType",value:"\u0414\u043e\u0433\u043b\u044f\u0434 \u0437\u0430 \u0432\u043e\u043b\u043e\u0441\u0441\u044f\u043c",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"otherService",children:"\u0414\u043e\u0433\u043b\u044f\u0434 \u0437\u0430 \u0432\u043e\u043b\u043e\u0441\u0441\u044f\u043c"})]}),"Nails master"===V.beautyMaster&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("label",{htmlFor:"serviceType",className:"fw-bold mt-1",children:"\u0412\u0438\u0434 \u043f\u043e\u0441\u043b\u0443\u0433\u0438:"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"manicur",name:"serviceType",value:"\u041c\u0430\u043d\u0456\u043a\u044e\u0440 (\u043f\u043e\u043a\u0440\u0438\u0442\u0442\u044f \u0433\u0435\u043b\u044c-\u043b\u0430\u043a\u043e\u043c)",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"manicur",children:"\u041c\u0430\u043d\u0456\u043a\u044e\u0440 (\u043f\u043e\u043a\u0440\u0438\u0442\u0442\u044f \u0433\u0435\u043b\u044c-\u043b\u0430\u043a\u043e\u043c)"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"gelNails",name:"serviceType",value:"\u041d\u0430\u0440\u043e\u0449\u0443\u0432\u0430\u043d\u043d\u044f \u0433\u0435\u043b\u0435\u043c",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"gelNails",children:"\u041d\u0430\u0440\u043e\u0449\u0443\u0432\u0430\u043d\u043d\u044f \u0433\u0435\u043b\u0435\u043c"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"pedicur",name:"serviceType",value:"\u041f\u0435\u0434\u0438\u043a\u044e\u0440",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"pedicur",children:"\u041f\u0435\u0434\u0438\u043a\u044e\u0440"})]}),"Waxing specialist"===V.beautyMaster&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsx)("label",{htmlFor:"serviceType",className:"fw-bold mt-1",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0437\u043e\u043d\u0443 \u0434\u043b\u044f \u0435\u043f\u0456\u043b\u044f\u0446\u0456\u0457:"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"face",name:"serviceType",value:"\u041b\u0438\u0446\u0435",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"face",children:"\u041b\u0438\u0446\u0435"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"arm",name:"serviceType",value:"\u0420\u0443\u043a\u0438",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"arm",children:"\u0420\u0443\u043a\u0438"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"legs",name:"serviceType",value:"\u041d\u043e\u0433\u0438",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"legs",children:"\u041d\u043e\u0433\u0438"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"armpits",name:"serviceType",value:"\u041f\u0456\u0434\u043c\u0438\u0448\u043a\u0438",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"armpits",children:"\u041f\u0456\u0434\u043c\u0438\u0448\u043a\u0438"}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"bikini",name:"serviceType",value:"\u0411\u0456\u043a\u0456\u043d\u0456",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"bikini",children:"\u0411\u0456\u043a\u0456\u043d\u0456"})]}),(0,H.jsx)("br",{}),(0,H.jsx)(y.gN,{type:"checkbox",id:"otherService",name:"serviceType",value:"\u0406\u043d\u0448\u0435",className:"me-2"}),(0,H.jsx)("label",{htmlFor:"otherService",children:"\u0406\u043d\u0448\u0435"}),(0,H.jsx)(y.Bc,{name:"serviceType",component:"div",className:"text-danger"})]}),(0,H.jsxs)("div",{children:[(0,H.jsx)("label",{htmlFor:"visitTime",className:"fw-bold mt-2",children:"\u0427\u0430\u0441 \u0432\u0456\u0437\u0438\u0442\u0443:"}),(0,H.jsx)("div",{className:"p-0 ".concat(S),children:function(){for(var e=[],t=V.workHourStart,n=V.workHourEnd-1,s=function(t){for(var n=function(n){var s="".concat(t.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0")),a=function(e,t){var n,s=60*e+t,a=(0,j.Z)(o);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i._id!==(null===m||void 0===m?void 0:m._id)){var r=i.visitTimes[0].visitTime,c=i.visitTimes[i.visitTimes.length-1].visitEndTime,l=60*parseInt(r.split(":")[0])+parseInt(r.split(":")[1]),d=60*parseInt(c.split(":")[0])+parseInt(c.split(":")[1]);if(s>=l&&s<=d)return!1}}}catch(u){a.e(u)}finally{a.f()}return!0}(t,n),i=W.some((function(e){return e.visitTime==="".concat(t,":").concat(n.toString().padStart(2,"0"))})),r=m&&W.some((function(e){var s=new Date("2000-01-01T".concat(e.visitTime)),a=new Date("2000-01-01T".concat(e.visitEndTime)),i=new Date("2000-01-01T".concat(t,":").concat(n.toString().padStart(2,"0")));return i>=s&&i<=a}));e.push((0,H.jsx)("button",{type:"button",onClick:function(){return G({visitTime:"".concat(t,":").concat(n.toString().padStart(2,"0")),visitEndTime:"".concat(t,":").concat((n+29).toString().padStart(2,"0"))})},className:"".concat(i||r?C:k," ").concat(!a&&w),disabled:!a,children:s},s))},s=0;s<=30;s+=30)n(s)},a=t;a<=n;a++)s(a);return e}()}),J&&(0,H.jsx)("div",{className:"text-danger",children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0447\u0430\u0441 \u0432\u0456\u0437\u0438\u0442\u0443"})]}),(0,H.jsx)("div",{onClick:function(){return v(!p)},children:(0,H.jsxs)("label",{htmlFor:"notes",className:"fw-bold mt-1 ms-1",children:["\u0414\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0430 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044f ",(0,H.jsx)(N.vpT,{})]})}),p&&(0,H.jsx)(y.gN,{as:"textarea",id:"notes",name:"notes",style:{width:"90%"},className:"ms-1"}),m&&(0,H.jsxs)("div",{className:"mt-2",children:[(0,H.jsx)("b",{className:"ps-1",children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438 \u0434\u0430\u0442\u0443 \u0432\u0456\u0437\u0438\u0442\u0443:"}),(0,H.jsx)("br",{}),(0,H.jsxs)("label",{htmlFor:"date",children:["\u0434.",(0,H.jsx)("input",{type:"number",id:"date",name:"date",min:"1",max:"31",value:z.date,onChange:K,style:{width:"50px"},className:"ms-1 me-2 ps-1"})]}),(0,H.jsxs)("label",{htmlFor:"month",children:["\u043c\u0456\u0441.",(0,H.jsx)("input",{type:"number",id:"month",name:"month",min:"1",max:"12",value:z.month,onChange:K,style:{width:"50px"},className:"ms-1 me-2 ps-1"})]}),(0,H.jsxs)("label",{htmlFor:"year",children:["\u0440.",(0,H.jsx)("input",{type:"number",id:"year",name:"year",min:"2024",max:"2030",value:z.year,onChange:K,style:{width:"70px"},className:"m-1 ps-1"})]})]}),(0,H.jsxs)("div",{className:"d-flex justify-content-around mt-2 mb-1",children:[(0,H.jsx)("button",{type:"submit",className:D,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),(0,H.jsx)("button",{className:E,onClick:n,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})})})},W=function(e){return e.clients.items},Y=n(7425),R=n(9743),Q="ClientList_client_list__uReti",z="ClientList_list_box__ahZ69",B=function(e){var t=e.client,n=e.isNotPast,s=e.handleEditClient,a=(0,r.useState)(!1),o=(0,i.Z)(a,2),m=o[0],d=o[1],u=(0,r.useState)(!1),x=(0,i.Z)(u,2),p=x[0],v=x[1],j=(0,c.I0)(),b=(0,c.v9)(W);(0,r.useEffect)((function(){}),[b]);var f=function(e){var t=e.split(":"),n=(0,i.Z)(t,2),s=n[0],a=n[1],r=parseInt(s),c=parseInt(a);60===(c+=1)&&(r+=1,c=0);var l=r.toString().padStart(2,"0"),o=c.toString().padStart(2,"0");return"".concat(l,":").concat(o)};return(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(R.Z,{className:"gx-0 ".concat(Q),children:[n&&(0,H.jsx)(h.Z,{xs:1,className:"my-auto text-center",children:(0,H.jsx)(N.fmQ,{size:25,onClick:function(){return s(t._id)},className:"p-0"})}),(0,H.jsxs)(h.Z,{xs:9,className:"ps-2 pe-2 ms-2 me-2 mb-2 ".concat(z),onClick:function(){d(!m)},children:[(0,H.jsxs)("span",{className:"fw-bold text-decoration-underline",children:[t.visitTimes[0].visitTime," -"," ",f(t.visitTimes[t.visitTimes.length-1].visitEndTime)," "]}),(0,H.jsx)("span",{className:"fw-semibold",children:t.serviceType.join(", ")})," ",m?(0,H.jsx)(N.iUH,{className:"text-primary"}):(0,H.jsx)(N.iUH,{}),m&&(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)("div",{className:"mb-0 text-capitalize",children:["\u0406\u043c'\u044f: ",t.name]}),t.phone&&(0,H.jsxs)("div",{children:["\u0422\u0435\u043b\u0435\u0444\u043e\u043d: ",t.phone]}),t.notes&&(0,H.jsx)("div",{children:t.notes})]})]}),n&&(0,H.jsx)(h.Z,{xs:1,className:"my-auto",children:(0,H.jsx)(Y.MF7,{size:25,onClick:function(){return v(!0)}})})]}),p&&(0,H.jsxs)("div",{className:"border rounded border-danger border-2 ps-2 pe-2 m-1 text-center",children:[(0,H.jsxs)("p",{className:"mb-0",children:["\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456, \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437\u0430\u043f\u0438\u0441 \u043d\u0430"," ",(0,H.jsxs)("span",{className:"fw-bolder",children:[t.visitTimes[0].visitTime," -"," ",f(t.visitTimes[t.visitTimes.length-1].visitEndTime)," "]}),"?"]}),(0,H.jsx)("button",{className:"btn btn-success mt-1 mb-1 ms-1 me-5",onClick:function(){return e=t._id,j((0,l.Nu)(e)).then((function(e){"fulfilled"===e.meta.requestStatus?I.ZP.success("\u0417\u0430\u043f\u0438\u0441 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0438\u0439!",{duration:2e3,position:"top-center"}):"rejected"===e.meta.requestStatus&&I.ZP.error("\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430, \u0437\u0430\u043f\u0438\u0441 \u043d\u0435 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u0438\u0439! \u041e\u043d\u043e\u0432\u0456\u0442\u044c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0443 \u0442\u0430 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043d\u043e\u0432\u0443",{duration:3e3,position:"top-center"})})).catch((function(e){})),void v(!1);var e},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),(0,H.jsx)("button",{className:"btn btn-danger m-1",onClick:function(){return v(!1)},children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})},L=n(9273),U=["_id"],J=["_id"],X=function(){var e=(0,r.useState)(new Date),t=(0,i.Z)(e,2),n=t[0],o=t[1],j=(0,r.useState)(!1),b=(0,i.Z)(j,2),f=b[0],y=b[1],g=(0,r.useState)([]),N=(0,i.Z)(g,2),T=N[0],Z=N[1],F=(0,r.useState)(!0),S=(0,i.Z)(F,2),k=S[0],C=S[1],w=(0,r.useState)(null),D=(0,i.Z)(w,2),E=D[0],I=D[1],M=(0,r.useState)(!1),P=(0,i.Z)(M,2),q=P[0],Y=P[1],R=(0,c.v9)(W),Q=(0,c.v9)(_.dy),z=(0,c.I0)(),X=new Date;(0,r.useEffect)((function(){o(X),K(X),z((0,l.Q7)())}),[]),(0,r.useEffect)((function(){K(n)}),[n,R]);var O=function(e){var t=new Date(X.getFullYear(),X.getMonth(),X.getDate()),n=new Date(e.getFullYear(),e.getMonth(),e.getDate());C(n>=t)},V=function(){y((function(e){return!e})),I(null)},K=function(e){var t=R.filter((function(t){return t.year===e.getFullYear()&&t.month===e.getMonth()+1&&t.date===e.getDate()})).sort((function(e,t){var n=e.visitTimes[0].visitTime.split(":"),s=t.visitTimes[0].visitTime.split(":");return parseInt(n[0])!==parseInt(s[0])?parseInt(n[0])-parseInt(s[0]):parseInt(n[1])-parseInt(s[1])}));Z(t),Y(Q.freeWorkDays.some((function(t){return t.year===e.getFullYear()&&t.month===e.getMonth()+1&&t.date===e.getDate()})))},G=function(e){var t=R.find((function(t){return t._id===e}));I(t),y(!0)},$=function(){var e=n.getFullYear(),t=n.getMonth()+1,i={date:n.getDate(),month:t,year:e},r=Q.freeWorkDays.map((function(e){e._id;return(0,a.Z)(e,J)})),c=[].concat((0,s.Z)(r),[i]);z((0,L.um)({id:Q._id,freeWorkDays:c})),Y(!q)},ee=Q.weekendSchedule.includes(String(n.getDay()));return(0,H.jsx)(h.Z,{className:"d-flex justify-content-center justify-content-lg-end",children:(0,H.jsxs)(h.Z,{xs:12,sm:8,md:6,xl:5,children:[(0,H.jsx)(h.Z,{className:x,children:(0,H.jsx)("div",{children:(0,H.jsxs)("div",{className:"pb-2",children:[(0,H.jsx)("h4",{className:p,children:(0,d.WU)(n,"d MMMM yyyy",{locale:u.Z})}),0===T.length?(0,H.jsx)("p",{className:"text-center pb-5",children:q||ee?"\u0423 \u0412\u0430\u0441 \u0432\u0438\u0445\u0456\u0434\u043d\u0438\u0439 \u0434\u0435\u043d\u044c":"\u041a\u043b\u0456\u0454\u043d\u0442\u0456\u0432 \u043d\u0435 \u043c\u0430\u0454"}):(0,H.jsx)("ul",{className:"ps-3 pe-3 list-unstyled",children:T&&T.map((function(e,t){return(0,H.jsx)("li",{className:"",children:(0,H.jsx)(B,{client:e,isNotPast:k,handleEditClient:G})},t)}))}),f&&(0,H.jsx)(A,{date:n,handleAddRecordForm:V,dateClients:T,clientToEdit:E}),!f&&k&&!q&&!ee&&(0,H.jsx)("div",{className:"text-center",children:(0,H.jsx)("button",{type:"button",className:v,onClick:V,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043f\u0438\u0441"})}),!f&&k&&!E&&!ee&&(0,H.jsx)("div",{className:"text-center mt-3 mb-2",children:(0,H.jsx)("button",{type:"button",className:"btn ".concat(q?"btn-success":"btn-danger"),onClick:function(){if(q){var e=Q.freeWorkDays.filter((function(e){return e.year!==n.getFullYear()||e.month!==n.getMonth()+1||e.date!==n.getDate()})).map((function(e){e._id;return(0,a.Z)(e,U)}));z((0,L.um)({id:Q._id,freeWorkDays:e})),Y(!q)}else $()},children:q?"\u0412\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0438 \u044f\u043a \u0440\u043e\u0431\u043e\u0447\u0438\u0439 \u0434\u0435\u043d\u044c":"\u0412\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0438 \u044f\u043a \u0432\u0438\u0445\u0456\u0434\u043d\u0438\u0439 \u0434\u0435\u043d\u044c"})})]})})}),(0,H.jsx)(h.Z,{className:"d-flex justify-content-center bg-white bg-opacity-50",children:(0,H.jsx)(m(),{selected:n,onChange:function(e){o(e),K(e),O(e)},startDate:n,inline:!0,onSelect:K,dayClassName:function(e){return(Array.isArray(Q.freeWorkDays)&&Q.freeWorkDays.some((function(t){return t.year===e.getFullYear()&&t.month===e.getMonth()+1&&t.date===e.getDate()}))?"bg-danger bg-opacity-50":"")+(Array.isArray(Q.weekendSchedule)&&Q.weekendSchedule.includes(String(e.getDay()))?"bg-danger bg-opacity-50":"")+(R.some((function(t){return t.year===e.getFullYear()&&t.month===e.getMonth()+1&&t.date===e.getDate()}))?"bg-success-subtle":"")}})})]})})},O=function(){return(0,H.jsx)(X,{})}}}]);
//# sourceMappingURL=469.3baed2c1.chunk.js.map